(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(189)},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),i=n.n(c),o=n(38),l=n(30),m=n(29),s=n(8),u=n(46),d=n(98),g=(n(96),n(187),n(99)),h=n(100),p=n(102),b=n(101),E=n(103),f=document.createElement("textarea"),y=function(e){return f.innerHTML=e,f.value},v=function(e){function t(){return Object(g.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"onLineItemDescriptionChange",value:function(e,t){this.props.onLineItemDescriptionChange({index:e,newDescription:t.target.value})}},{key:"onLineItemQuantityChange",value:function(e,t){this.props.onLineItemQuantityChange({index:e,newQuantity:t.target.value})}},{key:"onLineItemRateChange",value:function(e,t){this.props.onLineItemRateChange({index:e,newRate:t.target.value})}},{key:"onLineItemDeleteClick",value:function(e){this.props.onLineItemDeleteClick({index:e})}},{key:"getLineItemsTotal",value:function(e){return e.reduce(function(e,t){return e+t.quantity*t.rate},0)}},{key:"renderLineItemRow",value:function(e,t){return r.a.createElement(s.h,{key:t},r.a.createElement(s.b,{sm:8},r.a.createElement(s.e,{type:"text",value:e.description,onChange:this.onLineItemDescriptionChange.bind(this,t)})),r.a.createElement(s.b,{sm:1,style:{paddingLeft:"7px",paddingRight:"7px"}},r.a.createElement(s.e,{type:"number",step:"0.1",value:e.quantity,onChange:this.onLineItemQuantityChange.bind(this,t)})),r.a.createElement(s.b,{sm:1,style:{paddingLeft:"7px",paddingRight:"7px"}},r.a.createElement(s.e,{type:"number",value:e.rate,onChange:this.onLineItemRateChange.bind(this,t)})),r.a.createElement(s.b,{sm:1},y(Object(u.format)(e.quantity*e.rate,{currency:this.props.currency}))),r.a.createElement(s.b,{sm:1},r.a.createElement(s.a,{bsStyle:"danger",onClick:this.onLineItemDeleteClick.bind(this,t)},"X")))}},{key:"render",value:function(){var e=this.props.lineItems,t=e.map(this.renderLineItemRow.bind(this)),n=this.getLineItemsTotal(e);return r.a.createElement("div",null,r.a.createElement(s.h,null,r.a.createElement(s.b,{sm:8},"Item"),r.a.createElement(s.b,{sm:1},"Quantity"),r.a.createElement(s.b,{sm:1},"Rate"),r.a.createElement(s.b,{sm:1},"Amount"),r.a.createElement(s.b,{sm:1})),t,r.a.createElement(s.h,null,r.a.createElement(s.b,{sm:8},r.a.createElement(s.a,{bsStyle:"success",onClick:this.props.onLineItemAddClick},"+ Add Line Item")),r.a.createElement(s.b,{sm:1}),r.a.createElement(s.b,{sm:1},"Total"),r.a.createElement(s.b,{sm:1},y(Object(u.format)(n,{currency:this.props.currency}))),r.a.createElement(s.b,{sm:1})))}}]),t}(a.Component);v.defaultProps={lineItems:[]};var I=v,C=window.pdfMake;function x(e){if(e.imageLogo){console.log("imageLogo",e.imageLogo);var t=new FileReader;t.addEventListener("load",function(e,t){e.imageLogo=t.result,L(e)}.bind(null,e,t),!1),t.readAsDataURL(e.imageLogo)}else L(e)}function L(e){var t=function(e){var t=w(e);return console.log("notesAndTerms",t),{content:[N(e),O(e),k(e)].concat(Object(o.a)(w(e)))}}(e);C.createPdf(t).open()}function N(e){var t=[],n=[];return Object.entries({Date:e.date,"Payment Terms":e.paymentTerms,"Due Date":e.dueDate}).forEach(function(e){var a=Object(m.a)(e,2),r=a[0],c=a[1];c&&(t.push(r),n.push(c))}),{columns:[{stack:[].concat(Object(o.a)(j(e)),[{text:e.fromName,margin:[0,30,0,30]},{text:"Bill To",margin:[0,0,0,0]},{text:e.toName}])},{stack:[{text:"INVOICE",fontSize:25},{text:"# ".concat(e.invoiceNumber),fontSize:15,margin:[0,0,0,30]},{columns:[{width:50,text:""},{width:"*",columns:[{stack:t,alignment:"right"},{stack:n,alignment:"right"}]}]}],alignment:"right"}],columnGap:10,margin:[0,0,0,30]}}function O(e){var t=e.lineItems.map(function(e){return function(t){return[t.description,{text:String(t.quantity),alignment:"right"},{text:"".concat(t.rate," ").concat(e.currency),alignment:"right"},{text:"".concat((t.quantity*t.rate).toFixed(2)," ").concat(e.currency),alignment:"right"}]}}(e));return{table:{widths:["*","11%","11%","18%"],headerRows:1,body:[["Item",{text:"Quantity",alignment:"right"},{text:"Rate",alignment:"right"},{text:"Amount",alignment:"right"}]].concat(Object(o.a)(t))},layout:"lightHorizontalLines"}}function k(e){var t=e.lineItems.reduce(function(e,t){return e+t.quantity*t.rate},0);return{table:{widths:["*","18%"],body:[[{text:"Total",alignment:"right"},{text:"".concat(t.toFixed(2)," ").concat(e.currency),alignment:"right"}]]},layout:"noBorders",margin:[0,0,0,30]}}function w(e){var t=[];return console.log("params",e),e.notes&&(t=t.concat([{text:"Notes"},{text:e.notes,margin:[0,0,0,30]}])),e.terms&&(t=t.concat([{text:"Terms"},{text:e.terms,margin:[0,0,0,30]}])),t}function j(e){var t=[];return e.imageLogo&&t.push({image:e.imageLogo}),t}var D=Object.keys(u.symbols),S={invoiceNumber:"",fromName:"",currency:"CAD",toName:"",date:"",lineItems:[],notes:"",terms:""};var R=function(){var e=Object(a.useState)(S),t=Object(m.a)(e,2),n=t[0],c=t[1],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.a.useState(function(){var n;try{n=JSON.parse(localStorage.getItem(e)||"")}catch(a){n=localStorage.getItem(e)}return n=n||t,localStorage.setItem(e,"string"===typeof n?n:JSON.stringify(n)),n}),a=Object(m.a)(n,2),c=a[0],i=a[1];return[c,function(t){i(t),localStorage.setItem(e,"string"===typeof t?t:JSON.stringify(t))}]}("invoiceHistory",[]),u=Object(m.a)(i,2),g=u[0],h=u[1];function p(e,t){var a=t.target.value,r={};r[e]=a,c(Object(l.a)({},n,r))}return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(s.g,null,"INVOICE"),r.a.createElement("div",{className:"App-invoice col-12"},r.a.createElement(s.d,{horizontal:!0},r.a.createElement(s.f,{controlId:"invoiceNumber"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"Invoice #"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{type:"text",value:n.invoiceNumber,onChange:p.bind(this,"invoiceNumber")}))),r.a.createElement(s.f,{controlId:"fromName"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"MLSC #"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{componentClass:"textarea",rows:"1",placeholder:"Who is this invoice from?",value:n.fromName,onChange:p.bind(this,"fromName")}))),r.a.createElement(s.f,{controlId:"toName"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"Property Address"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{componentClass:"textarea",rows:"3",placeholder:"Who is this invoice to?",value:n.toName,onChange:p.bind(this,"toName")}))),r.a.createElement(s.f,{controlId:"date"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"Deposit Date"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{type:"date",value:n.date,onChange:p.bind(this,"date")}))),r.a.createElement(s.f,{controlId:"dueDate"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"Check Date"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{type:"date",value:n.dueDate,onChange:p.bind(this,"dueDate")}))),r.a.createElement(s.f,{controlId:"currency"},r.a.createElement(s.b,{componentClass:s.c,sm:2},"Currency"),r.a.createElement(s.b,{sm:4},r.a.createElement(s.e,{componentClass:"select",placeholder:"Select currency",defaultValue:n.currency,onChange:p.bind(this,"currency")},D.map(function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))))),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"row"},r.a.createElement(s.d,{horizontal:!0},r.a.createElement(I,{lineItems:n.lineItems,currency:n.currency,onLineItemDescriptionChange:function(e){var t=n.lineItems;t[e.index].description=e.newDescription,c(Object(l.a)({},n,{lineItems:t}))},onLineItemQuantityChange:function(e){var t=n.lineItems;t[e.index].quantity=e.newQuantity,c(Object(l.a)({},n,{lineItems:t}))},onLineItemRateChange:function(e){var t=n.lineItems;t[e.index].rate=e.newRate,c(Object(l.a)({},n,{lineItems:t}))},onLineItemDeleteClick:function(e){var t=n.lineItems;t.splice(e.index,1),c(Object(l.a)({},n,{lineItems:t}))},onLineItemAddClick:function(){var e=n.lineItems;e.push({description:"",quantity:0,rate:0}),c(Object(l.a)({},n,{lineItems:e}))}}),r.a.createElement(s.f,null,r.a.createElement(s.c,null,"Notes"),r.a.createElement(s.e,{componentClass:"textarea",placeholder:"Notes - any relevant information not already covered",value:n.notes,onChange:p.bind(this,"notes")})),r.a.createElement(s.f,null,r.a.createElement(s.c,null,"Terms"),r.a.createElement(s.e,{componentClass:"textarea",placeholder:"Terms and conditions - late fees, payment methods, delivery schedule",value:n.terms,onChange:p.bind(this,"terms")})))))),r.a.createElement("div",{className:"Footer-Container"},r.a.createElement("div",{className:"Footer"},r.a.createElement(s.b,{sm:2},r.a.createElement(s.a,{onClick:function(){c(S)}},"Clear Form")),r.a.createElement(s.b,{smOffset:8,sm:2},r.a.createElement(s.a,{onClick:function(){x(n),Object(d.a)(n,g[0])||h([n].concat(Object(o.a)(g.slice(0,24))))},bsStyle:"primary"},"Create Invoice"))))))};n(188);i.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.2c4ab350.chunk.js.map